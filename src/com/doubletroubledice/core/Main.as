package com.doubletroubledice.core {	import com.dfast.managers.SoundManager;		import com.doubletroubledice.common.Globals;		import flash.events.Event;	import flash.display.Sprite;	/**	 * The Main class creates the core components needed to run the application.	 */	public class Main extends Sprite 	{		private var _model:Model;		private var _controller:Controller;		private var _view:View;		public function Main()		{			stage.scaleMode = "noScale";			stage.align = "tl";						var domain:String = this.loaderInfo.url;			Globals.baseUrl = (domain.indexOf("file://") > -1) ? "../" : "";			Globals.baseUrl = root.loaderInfo.parameters.baseUrl || Globals.baseUrl;						var xmlPath:String = root.loaderInfo.parameters.xml || "xml/doubletrouble_data.xml";						_model = new Model();			_model.addEventListener( Event.INIT, onModelReady );			_model.loadXML(Globals.baseUrl + xmlPath);						_controller = new Controller(_model);			_view = new View(_model,_controller);						parseFlashVars();		}				private function parseFlashVars():void		{			_model.practiceMode = (root.loaderInfo.parameters.practiceMode == true) ? true : false;			_model.oodlesOption1Available = (root.loaderInfo.parameters.option1 == 1) ? true : false;			_model.oodlesOption2Available = (root.loaderInfo.parameters.option2 == 1) ? true : false;			_model.oodlesOption3Available = (root.loaderInfo.parameters.option3 == 1) ? true : false;						if (!_model.oodlesOption1Available && !_model.oodlesOption2Available && !_model.oodlesOption3Available) 			{				_model.practiceMode = true;			}		}				private function onModelReady(event:Event):void 		{			SoundManager.getInstance().registerSounds( _model.soundData, Globals.baseUrl );			addChild(_view);		}	}}